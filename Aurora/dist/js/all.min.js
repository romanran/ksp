"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){var e=function e(){_classCallCheck(this,e),this.is_local="localhost"==window.location.hostname,this.breakpoints={full_hd:1919,tablet:1199,large:1023,archaic:991,smart:767,phone:464,phones:419,phonexs:374},this.dom_loaded=!1,this.regx={email:new RegExp("^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$")}};return window._TD=e}(),function(){function e(){("localhost"==window.location.hostname||window.location.href.indexOf("dev")>0)&&console.log.apply(console,arguments)}return window.deb=e}();var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),dom=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getElements",value:function(){var e={canvas_wrap:{selector:"[charts]"}};return e}},{key:"cache",value:function(){var e=this.getElements();_.each(e,this.append.bind(this))}},{key:"append",value:function(e,t){var n=this;void 0===this["$"+t]&&(e.selector.indexOf("[")>=0?(e.selector=e.selector.replace("[","[data-"),this["$"+t]=$(e.selector)):this["$"+t]=$(e.selector)),e.children&&_.each(e.children,function(e,t){void 0===n["$"+t]&&(e.indexOf("[")>=0?(e=e.replace("[","[data-"),n["$"+t]=$(e)):n["$"+t]=$(e))})}}]),e}();_TD.prototype.documentReady=function(){var e=this;this.dom=new dom,this.dom.cache(),this.journals=[],$.getJSON("flightlogs/",function(e){deb(e)}),this.journal1=new Journal("journal_Sat-1.json"),this.journal1.q.then(function(){e.journals.push(e.journal1),e.createCharts()})},$(function(){var e=new _TD;return e.documentReady(),window.TD=e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();_TD.prototype.createCharts=function(){var e=this;this.journals_A=[],_.each(this.journals,function(t){var n=$("<canvas></canvas>");e.dom.$canvas_wrap.html(n);var r=new JournalChart(n,t);deb(r),e.journals_A.push(t)})};var JournalChart=function(){function e(t,n){_classCallCheck(this,e);var r=[];this.title=n.entries[0].SHIP?n.entries[0].SHIP:n.entries[0].SPD;for(var o in n.entries)0!=o&&r.push(1e3*n.entries[o].MISSIONTIME);this.$canvas=t,deb(n.entries[0]);var a=this.getType("line",r,_.takeRight(n.entries,n.entries.length-1));this.chart=new Chart(t,a)}return _createClass(e,[{key:"getType",value:function(e,t,n){var r=this,o=[],a=[],i=[];n.length;_.each(n,function(e,t){Object.keys(e).length;_.each(e,function(e,t){if("object"!=("undefined"==typeof e?"undefined":_typeof(e)))return"DESC"===t?(i.push(e),0):"TIME"===t||"MISSIONTIME"===t||"FACING"===t?0:void(a[t]?a[t].push(e):a[t]=[])})});var s=random.colors(Object.keys(a).length),l=0;return _.forIn(a,function(e,t){var n;o.push((n={label:t,comment:i,fill:!1,data:e,title:t,borderColor:s[l],backgroundColor:s[l],chartColors:s,borderWidth:1,radius:3},_defineProperty(n,"borderWidth",1),_defineProperty(n,"tension",.3),n)),l++}),{type:e,data:{labels:t,datasets:o},backgroundColor:"red",options:{title:{display:!0,fontColor:"white",fontSize:20,text:this.title},hover:{onHover:function(e){r.$canvas.css("cursor",e[0]?"pointer":"default")},animationDuration:100},legend:{position:"left",labels:{fontColor:"white",fontStyle:"bold"},onHover:function(e){r.$canvas.css("cursor",e?"pointer":"default")}},tooltips:{mode:"index",intersect:!0,yPadding:10,xPadding:10,callbacks:{title:function(e,t){t.datasets[0].comment[e[0].index];return t.datasets[0].comment[e[0].index]}}},animation:{duration:100},scales:{yAxes:[{gridLines:{color:"rgba(195,235,255,0.15)"},ticks:{fontColor:"white",beginAtZero:!0},scaleLabel:{display:!0}}],xAxes:[{gridLines:{color:"rgba(195,235,255,0.05)"},type:"time",position:"bottom",ticks:{fontColor:"white",beginAtZero:!0},time:{unit:"second",unitStepSize:5,displayFormats:{second:"mm:ss"}},scaleLabel:{display:!0,fontColor:"white",labelString:"MISSION TIME"}}]}}}}}]),e}();Chart.plugins.register({beforeDraw:function(e){var t=e.chart.ctx;t.fillStyle="#303439",t.fillRect(0,0,e.chart.width,e.chart.height)}});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Journal=function(){function e(t){_classCallCheck(this,e),this.readJSON(t),this.entries=[],this.q=$.Deferred()}return _createClass(e,[{key:"readJSON",value:function(e){$.getJSON("flightlogs/"+e,this.parseJSON.bind(this))}},{key:"parseJSON",value:function(e){var t=this,n=_.filter(e.entries,function(e,t){return t%2==1});_.each(n,function(e,n){e.entries&&t.crawlObject(e.entries,!1)}),this.q.resolve()}},{key:"crawlObject",value:function(e,t){var n=this,r={};return _.each(e,function(t,o){o%2&&(t.entries?r[e[o-1]]=n.crawlObject(t.entries,!0):r[e[o-1]]=t)}),t?r:void this.entries.push(r)}},{key:"getData",get:function(){return this.entries}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Tools=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"hashCode",value:function(e){for(var t=0,n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);return t}},{key:"intToRGB",value:function(e){var t=(16777215&e).toString(16).toUpperCase();return"00000".substring(0,6-t.length)+t}},{key:"strToColor",value:function(e){var t=this.hashCode(e);return"#"+this.intToRGB(t)}}]),e}();